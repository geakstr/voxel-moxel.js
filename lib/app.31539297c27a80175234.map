{"version":3,"file":"app.31539297c27a80175234.js","sources":["webpack:///app.31539297c27a80175234.js"],"sourcesContent":["webpackJsonp([1],[function(a,b,c){\"use strict\";var d=Math.PI;Object.defineProperty(b,\"__esModule\",{value:!0});var e=function(a){a.width=window.innerWidth,a.height=window.innerHeight;try{var b=a.getContext(\"webgl\");if(!b)throw new Error(\"Unable to initialize WebGL\");return b.clearColor(0.8,0.8,0.8,1),b.enable(b.DEPTH_TEST),b}catch(a){throw a}};(function(){})();var f=function(a){return i[a]},g=function(a){return j[a]},h=function(a){var b=m(a,\"shader-fs\"),c=m(a,\"shader-vs\"),d=a.createProgram();if(!d)throw new Error(\"Can't create shader\");if(a.attachShader(d,c),a.attachShader(d,b),a.linkProgram(d),!a.getProgramParameter(d,a.LINK_STATUS))throw new Error(\"Can't init shaders\");return a.useProgram(d),j.vertexPosition=k(a,d,\"aVertexPosition\"),j.textureCoord=k(a,d,\"aTextureCoord\"),i.mvpMatrix=l(a,d,\"uMVPMatrix\"),i.sampler=l(a,d,\"uSampler\"),d},i={},j={},k=function(a,b,c){var d=a.getAttribLocation(b,c);return a.enableVertexAttribArray(d),d},l=function(a,b,c){var d=a.getUniformLocation(b,c);if(!d)throw new Error(\"Could not get \"+c+\" uniform location\");return d},m=function(a,b){var c=document.getElementById(b);if(!c)return null;for(var d=\"\",e=c.firstChild;e;)3==e.nodeType&&(d+=e.textContent),e=e.nextSibling;var f;if(\"x-shader/x-fragment\"==c.type)f=a.createShader(a.FRAGMENT_SHADER);else if(\"x-shader/x-vertex\"==c.type)f=a.createShader(a.VERTEX_SHADER);else return null;if(a.shaderSource(f,d),a.compileShader(f),!a.getShaderParameter(f,a.COMPILE_STATUS))throw a.getShaderInfoLog(f);return f};(function(){})();var n={},o=function(a,b,c){var d=r(a,c);return n[b]=d,d},p=function(a){return n[a]},q=function(a){o(a,\"cobblestone\",\"./assets/cobblestone.png\")},r=function(a,b){var c=a.createTexture();if(!c)throw new Error(\"Could not load texture\");return c.image=new Image,c.image.onload=s.bind(null,a,c),c.image.src=b,c},s=function(a,b){a.bindTexture(a.TEXTURE_2D,b),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b.image),t(b.image.width)&&t(b.image.height)?a.generateMipmap(a.TEXTURE_2D):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST)),a.bindTexture(a.TEXTURE_2D,null)},t=function(a){return 0==(a&a-1)};(function(){})();var u=c(1),v=function(c,d,a){var b=d[0],e=d[1],f=d[2],g=a[0],h=a[1],i=a[2],j=a[3],k=j*b+h*f-i*e,l=j*e+i*b-g*f,m=j*f+g*e-h*b,n=-g*b-h*e-i*f;return c[0]=k*j+n*-g+l*-i-m*-h,c[1]=l*j+n*-h+m*-g-k*-i,c[2]=m*j+n*-i+k*-h-l*-g,c},w=function(b,c,a){return b[0]=c[0]*a,b[1]=c[1]*a,b[2]=c[2]*a,b};(function(){})();var x={},y=0.01,z=0,A=0,B=5,C=5,D=!0,E=u.c.fromValues(0,0,2),F=u.c.fromValues(0,0,0),G=u.c.fromValues(0,0,1),H=u.c.fromValues(0,1,0),I=u.c.fromValues(0,0,0),J=u.a.create(),K=u.a.create(),L=u.a.create(),M=u.a.create(),N=function(a){!1==D&&S(),u.a.perspective(J,45,a,0.1,100),u.c.normalize(G,u.c.sub(G,E,F));var b=u.c.fromValues(0,0,0);u.c.cross(b,G,H);var c=u.b.fromValues(0,0,0,1);u.b.setAxisAngle(c,b,A*d/180);var e=u.b.fromValues(0,0,0,1);u.b.setAxisAngle(e,H,z*d/180);var f=u.b.fromValues(0,0,0,1);u.b.multiply(f,c,e),v(G,G,f),u.c.add(F,F,I),u.c.add(E,F,w(u.c.create(),G,1)),A*=0.5,z*=0.5,w(I,I,0.8),u.a.lookAt(K,F,E,H),u.a.multiply(M,J,u.a.multiply(M,K,L))},O=function(){return D=!0},P=function(){return D=!1},Q=function(a){a<-B?a=-B:a>B&&(a=B),A+=a,360<A?A-=360:-360>A&&(A+=360)},R=function(a){a<-C?a=-C:a>C&&(a=C),90<A&&270>A||-90>A&&-270<A?z-=a:z+=a,360<z?z-=360:-360>z&&(z+=360)},S=function(){var a=u.c.fromValues(0,0,0);x[69]&&(u.c.copy(a,H),w(a,a,y),u.c.add(I,I,a)),x[81]&&(u.c.copy(a,H),w(a,a,y),u.c.sub(I,I,a)),x[65]&&(u.c.cross(a,G,H),w(a,a,y),u.c.sub(I,I,a)),x[68]&&(u.c.cross(a,G,H),w(a,a,y),u.c.add(I,I,a)),x[87]&&(u.c.copy(a,G),w(a,a,y),u.c.add(I,I,a)),x[83]&&(u.c.copy(a,G),w(a,a,y),u.c.sub(I,I,a))};document.addEventListener(\"mousemove\",function(a){!1==D&&(R(0.1*-a.movementX),Q(0.1*-a.movementY))},!1),document.addEventListener(\"keydown\",function(a){!1==D&&(x[a.keyCode]=!0)},!1),document.addEventListener(\"keyup\",function(a){!1==D&&(x[a.keyCode]=!1)},!1);(function(){})();var T=function a(b,c,d,e){requestAnimationFrame(a.bind(null,b,c,d,e)),U(b,c,d,e)},U=function(a,b,c,d){a.viewport(0,0,b.width,b.height),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),N(b.width/b.height),a.bindBuffer(a.ARRAY_BUFFER,d.position),a.vertexAttribPointer(g(\"vertexPosition\"),d.position.itemSize,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,p(\"cobblestone\")),a.uniform1i(f(\"sampler\"),0),a.bindBuffer(a.ARRAY_BUFFER,d.texture),a.vertexAttribPointer(g(\"textureCoord\"),d.texture.itemSize,a.FLOAT,!1,0,0),V(a,c,M),a.drawArrays(a.TRIANGLES,0,d.position.numItems)},V=function(a,b,c){a.uniformMatrix4fv(f(\"mvpMatrix\"),!1,c)};(function(){})();(function(){})();var W=this,X=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d[\"throw\"](a))}catch(a){f(a)}}function i(a){a.done?e(a.value):new c(function(b){b(a.value)}).then(g,h)}i((d=d.apply(a,b||[])).next())})},Y=function(a){return X(W,void 0,void 0,function*(){return Z(a,\"\\nNUMPOLLIES 36\\n\\n// Floor 1\\n-3.0  0.0 -3.0 0.0 6.0\\n-3.0  0.0  3.0 0.0 0.0\\n 3.0  0.0  3.0 6.0 0.0\\n\\n-3.0  0.0 -3.0 0.0 6.0\\n 3.0  0.0 -3.0 6.0 6.0\\n 3.0  0.0  3.0 6.0 0.0\\n\\n// Ceiling 1\\n-3.0  1.0 -3.0 0.0 6.0\\n-3.0  1.0  3.0 0.0 0.0\\n 3.0  1.0  3.0 6.0 0.0\\n-3.0  1.0 -3.0 0.0 6.0\\n 3.0  1.0 -3.0 6.0 6.0\\n 3.0  1.0  3.0 6.0 0.0\\n\\n// A1\\n\\n-2.0  1.0  -2.0 0.0 1.0\\n-2.0  0.0  -2.0 0.0 0.0\\n-0.5  0.0  -2.0 1.5 0.0\\n-2.0  1.0  -2.0 0.0 1.0\\n-0.5  1.0  -2.0 1.5 1.0\\n-0.5  0.0  -2.0 1.5 0.0\\n\\n// A2\\n\\n 2.0  1.0  -2.0 2.0 1.0\\n 2.0  0.0  -2.0 2.0 0.0\\n 0.5  0.0  -2.0 0.5 0.0\\n 2.0  1.0  -2.0 2.0 1.0\\n 0.5  1.0  -2.0 0.5 1.0\\n 0.5  0.0  -2.0 0.5 0.0\\n\\n// B1\\n\\n-2.0  1.0  2.0 2.0  1.0\\n-2.0  0.0   2.0 2.0 0.0\\n-0.5  0.0   2.0 0.5 0.0\\n-2.0  1.0  2.0 2.0  1.0\\n-0.5  1.0  2.0 0.5  1.0\\n-0.5  0.0   2.0 0.5 0.0\\n\\n// B2\\n\\n 2.0  1.0  2.0 2.0  1.0\\n 2.0  0.0   2.0 2.0 0.0\\n 0.5  0.0   2.0 0.5 0.0\\n 2.0  1.0  2.0 2.0  1.0\\n 0.5  1.0  2.0 0.5  1.0\\n 0.5  0.0   2.0 0.5 0.0\\n\\n// C1\\n\\n-2.0  1.0  -2.0 0.0  1.0\\n-2.0  0.0   -2.0 0.0 0.0\\n-2.0  0.0   -0.5 1.5 0.0\\n-2.0  1.0  -2.0 0.0  1.0\\n-2.0  1.0  -0.5 1.5  1.0\\n-2.0  0.0   -0.5 1.5 0.0\\n\\n// C2\\n\\n-2.0  1.0   2.0 2.0 1.0\\n-2.0  0.0   2.0 2.0 0.0\\n-2.0  0.0   0.5 0.5 0.0\\n-2.0  1.0  2.0 2.0 1.0\\n-2.0  1.0  0.5 0.5 1.0\\n-2.0  0.0   0.5 0.5 0.0\\n\\n// D1\\n\\n2.0  1.0  -2.0 0.0 1.0\\n2.0  0.0   -2.0 0.0 0.0\\n2.0  0.0   -0.5 1.5 0.0\\n2.0  1.0  -2.0 0.0 1.0\\n2.0  1.0  -0.5 1.5 1.0\\n2.0  0.0   -0.5 1.5 0.0\\n\\n// D2\\n\\n2.0  1.0  2.0 2.0 1.0\\n2.0  0.0   2.0 2.0 0.0\\n2.0  0.0   0.5 0.5 0.0\\n2.0  1.0  2.0 2.0 1.0\\n2.0  1.0  0.5 0.5 1.0\\n2.0  0.0   0.5 0.5 0.0\\n\\n// Upper hallway - L\\n-0.5  1.0  -3.0 0.0 1.0\\n-0.5  0.0   -3.0 0.0 0.0\\n-0.5  0.0   -2.0 1.0 0.0\\n-0.5  1.0  -3.0 0.0 1.0\\n-0.5  1.0  -2.0 1.0 1.0\\n-0.5  0.0   -2.0 1.0 0.0\\n\\n// Upper hallway - R\\n0.5  1.0  -3.0 0.0 1.0\\n0.5  0.0   -3.0 0.0 0.0\\n0.5  0.0   -2.0 1.0 0.0\\n0.5  1.0  -3.0 0.0 1.0\\n0.5  1.0  -2.0 1.0 1.0\\n0.5  0.0   -2.0 1.0 0.0\\n\\n// Lower hallway - L\\n-0.5  1.0  3.0 0.0 1.0\\n-0.5  0.0   3.0 0.0 0.0\\n-0.5  0.0   2.0 1.0 0.0\\n-0.5  1.0  3.0 0.0 1.0\\n-0.5  1.0  2.0 1.0 1.0\\n-0.5  0.0   2.0 1.0 0.0\\n\\n// Lower hallway - R\\n0.5  1.0  3.0 0.0 1.0\\n0.5  0.0   3.0 0.0 0.0\\n0.5  0.0   2.0 1.0 0.0\\n0.5  1.0  3.0 0.0 1.0\\n0.5  1.0  2.0 1.0 1.0\\n0.5  0.0   2.0 1.0 0.0\\n\\n\\n// Left hallway - Lw\\n\\n-3.0  1.0  0.5 1.0 1.0\\n-3.0  0.0   0.5 1.0 0.0\\n-2.0  0.0   0.5 0.0 0.0\\n-3.0  1.0  0.5 1.0 1.0\\n-2.0  1.0  0.5 0.0 1.0\\n-2.0  0.0   0.5 0.0 0.0\\n\\n// Left hallway - Hi\\n\\n-3.0  1.0  -0.5 1.0 1.0\\n-3.0  0.0   -0.5 1.0 0.0\\n-2.0  0.0   -0.5 0.0 0.0\\n-3.0  1.0  -0.5 1.0 1.0\\n-2.0  1.0  -0.5 0.0 1.0\\n-2.0  0.0   -0.5 0.0 0.0\\n\\n// Right hallway - Lw\\n\\n3.0  1.0  0.5 1.0 1.0\\n3.0  0.0   0.5 1.0 0.0\\n2.0  0.0   0.5 0.0 0.0\\n3.0  1.0  0.5 1.0 1.0\\n2.0  1.0  0.5 0.0 1.0\\n2.0  0.0   0.5 0.0 0.0\\n\\n// Right hallway - Hi\\n\\n3.0  1.0  -0.5 1.0 1.0\\n3.0  0.0   -0.5 1.0 0.0\\n2.0  0.0   -0.5 0.0 0.0\\n3.0  1.0  -0.5 1.0 1.0\\n2.0  1.0 -0.5 0.0 1.0\\n2.0  0.0   -0.5 0.0 0.0\\n\")})},Z=function(a,b){var c=0,d=[],e=[];b.split(\"\\n\").forEach(function(a){var b=a.replace(/^\\s+/,\"\").split(/\\s+/);5===b.length&&\"//\"!==b[0]&&(d.push(parseFloat(b[0])),d.push(parseFloat(b[1])),d.push(parseFloat(b[2])),e.push(parseFloat(b[3])),e.push(parseFloat(b[4])),c+=1)});var f=a.createBuffer();if(!f)throw new Error(\"Can't create world vertex position buffer\");a.bindBuffer(a.ARRAY_BUFFER,f),a.bufferData(a.ARRAY_BUFFER,new Float32Array(d),a.STATIC_DRAW),f.itemSize=3,f.numItems=c;var g=a.createBuffer();if(!g)throw new Error(\"Can't create world vertex texture coord buffer\");return a.bindBuffer(a.ARRAY_BUFFER,g),a.bufferData(a.ARRAY_BUFFER,new Float32Array(e),a.STATIC_DRAW),g.itemSize=2,g.numItems=c,{position:f,texture:g}};(function(){})();var $=c(2),_=c.n($),aa=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d[\"throw\"](a))}catch(a){f(a)}}function i(a){a.done?e(a.value):new c(function(b){b(a.value)}).then(g,h)}i((d=d.apply(a,b||[])).next())})};window.addEventListener(\"load\",function(){var a=document.querySelector(\"#app\");(function(){return aa(this,void 0,void 0,function*(){var b=e(a),c=h(b),d=yield Y(b);q(b),T(b,a,c,d)})})();a.addEventListener(\"click\",a.requestPointerLock,!1),document.addEventListener(\"pointerlockchange\",function(){document.pointerLockElement===a?P():O()},!1)});(function(){})()},,function(a,b,c){var d=c(3);\"string\"==typeof d&&(d=[[a.i,d,\"\"]]);var e,f={hmr:!0};f.transform=e;c(5)(d,f);d.locals&&(a.exports=d.locals),!1},function(a,b,c){b=a.exports=c(4)(void 0),b.push([a.i,\"*{box-sizing:border-box;margin:0;padding:0}body,html{height:100%}body{background:#000}#page{display:flex;position:absolute;top:0;left:0;min-width:100%;min-height:100%}#app{flex:1}\",\"\"])}],[0]);\n\n\n// WEBPACK FOOTER //\n// app.31539297c27a80175234.js"],"mappings":"AAAA","sourceRoot":""}